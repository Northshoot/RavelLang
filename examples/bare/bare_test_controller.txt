streaming model Random(size):
    properties:
        durable = False
        reliable = False
        #records = size
        records = 10

    schema:
        # comment here
        value = IntegerField()


controller RandomControllerEmbedded(random: Random):
    event random.arrived():
        #s1 : str = "\"foo\""
        #s2 = s1 + "lol"
        #x : int32 = 7
        #y = x + 5
        #z = (x + 5 >= 0) or True
        #q : int32
        #if z:
        #    q = self.record.value
        #else:
        #    q = self.record.value - 1
        #self.record.value /= q + self.record.value
        #rec2 = self.create()
        #rec2.value = 42

        #rec3 = random.create()
        #rec3.value = 1000
        #while rec3.value > 5:
        #    while x + y > q:
        #        x -= 1
        #    rec3.value -= 5

        #while x > 0 or y < 0:
        #    if s1 == "bar":
        #        x += 1
        #    else:
        #        x -= 1
        #    y -= 1

        x : int32
        y : int32
        while True:
            x = 1
            if y == 1:
                x = 2
                break
            x = 4
        x = 5


space EmbeddedSpace:
    platform:
        language = CLang
        templates = nrf52
        system = nrf52Platform.v12

    models:
        random = Random(size=10)
        #frequency = Frequency(size=1)
        #boor_error = BootError()

    controllers:
        rndcnt = RandomControllerEmbedded(random = models.random)

    sources:
        random = platform.system.random
