streaming model Random(size):
    properties:
        durable = False
        reliable = False
        records = size

    schema:
        # comment here
        value : int32

interface TimerSource():
    implementation:
        java = "rlib/java/timer.stg"
        #c = "c/timer_c.stg", "c/timer_h.stg"
        c = "rlib/c/timer_c.stg"

    def start_one_shot( time : int32 )
    def cancel()
    def start_periodic( time: int32)

    event fired()

interface RandomSource():
    implementation:
        java = "rlib/java/random.stg"
        c = "rlib/c/random_c.stg"

    def next(): int32

controller RandomControllerEmbedded(random: Random, timer: TimerSource, rnd : RandomSource):
    event random.arrived():
        s1 = "foo"
        s2 = s1 + "bar"

        arrivedRec = self.record

        rec = random.create()
        rec.value = rnd.next()
        random.save(rec)
    event random.departed():
        x = 7

    event timer.fired():
        #self
        rec = random.create()
        random.save(rec)

space EmbeddedSpace:
    platform:
        language = JLang
        templates = nrf52
        system = Android.v22

    models:
        random = Random(size=100)
        #frequency = Frequency(size=1)
        #boor_error = BootError()

    interfaces:
        #random = platform.system.random
        timer_1 = TimerSource()
        rng_1 = RandomSource()

    controllers:
        rndcnt_1 = RandomControllerEmbedded(random = models.random, timer = interfaces.timer_1, rnd = interfaces.rng_1)

space CSpace:
    platform:
        language = CLang
        templates = nrf52
        system = Android.v22

    models:
        random = Random(size=100)
        #frequency = Frequency(size=1)
        #boor_error = BootError()

    interfaces:
        #random = platform.system.random
        timer_1 = TimerSource()
        rng_1 = RandomSource()

    controllers:
        rndcnt_1 = RandomControllerEmbedded(random = models.random, timer = interfaces.timer_1, rnd = interfaces.rng_1)