streaming model Random(size):
    properties:
        durable=False
        reliable=False
        records = size

    schema:
        value = IntegerField()


controller RandomControllerEmbedded(random: Random):
    event random.arrived():
        x : int32 = 7
        y = x + 5
        z = (x + 5) or -1
        q : int32
        if z:
            q = random.value
        else:
            q = random.value - 1
        random.value /= q + random.value


space EmbeddedSpace:
    platform:
        language = CLang
        templates=nrf52
        system = nrf52Platform.v12


    models:
        random=Random(size=10)
        frequency=Frequency(size=1)
        boor_error = BootError()

    controllers:
        rndcnt = RandomControllerEmbedded(random = random)

    sources:
        random = platform.source.random
