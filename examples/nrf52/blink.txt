interface Timer():
    implementation:
        c = "rlib/nrf52/timer.stg"
    def start_one_shot(time : int32)
    def cancel()
    def start_periodic(time: int32)

    event fired()

interface Led(led_num: int32):
    configuration:
        led_id = led_num
    implementation:
        c = "rlib/nrf52/led.stg"

    def init()
    def on()
    def off()
    def toggle()

controller EController(timer : Timer, led_1 : Led):

    event system.started():
        timer.start_periodic(1000)
        led_1.toggle()



space EmbeddedSpace:
    platform:
        language = CLang
        system = Nrf52.v1

    interfaces:
        timer = Timer()
        led = Led(led_num = 1)

    controllers:
        rndcnt_1 = EController(timer = interfaces.timer, led_1 = interfaces.led)

